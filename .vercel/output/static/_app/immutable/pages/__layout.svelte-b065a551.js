import{S as ve,i as ge,s as be,F as mt,G as _t,H as vt,I as gt,f as le,t as ie,J as me,o as Tt,K as ct,E as $,L as At,l as u,m as f,n as c,h as o,p as a,M as Ut,b as z,N as l,w as We,a as A,r as x,O as ut,x as je,c as U,u as I,P as ft,Q as y,y as Be,R as fe,B as Le,T as xt}from"../chunks/index-84b22e2d.js";import{p as bt,s as kt}from"../chunks/stores-453159fe.js";import{s as It}from"../chunks/dbClient-39676d6e.js";import{w as ke}from"../chunks/index-b8e1f907.js";import"../chunks/preload-helper-c28b9807.js";var ht=10,Ot=2,St=10,Ct="/api/auth",Rt=class extends Error{constructor(r,e){super(r),this.errorType=e,this.source="sb_auth_helpers"}toObj(){return{type:this.errorType,message:this.message,source:this.source}}toString(){return JSON.stringify(this.toObj())}},Et=class extends Rt{constructor(r){super(`The request to ${r} failed!`,"callback_url_failed")}};const Ee={user:null,accessToken:null,isLoading:!1,error:null},yt=ke(Ee.user),Nt=r=>yt.set(r),wt=ke(Ee.accessToken),Wt=r=>wt.set(r),jt=ke(Ee.isLoading),he=r=>jt.set(r),Bt=ke(Ee.error),Ne=r=>Bt.set(r);let de=0,Se;const Lt=async r=>{if(typeof r.json!="function")return String(r);const e=await r.json();return{message:e.msg||e.message||e.error_description||e.error||JSON.stringify(e),status:(r==null?void 0:r.status)||500}},Dt=async r=>{const e=await fetch(r,{method:"POST"}).catch(()=>{});return e?e.ok?e.json():{user:null,accessToken:null,error:await Lt(e)}:{user:null,accessToken:null,error:"Request failed"}};let pe,Ce,Re;const _e=async r=>{(!pe||!Ce||!Re)&&(pe=r.profileUrl,Ce=r.autoRefreshToken,Re=r.supabaseClient);try{de++;const{user:e,accessToken:s,error:t}=await Dt(pe);if(t){if(t==="Request failed"&&de<St){Se&&clearTimeout(Se),Se=window.setTimeout(_e,Ot**de*100);return}Ne(new Error(t))}if(de=0,s&&(Re.auth.setAuth(s),Wt(s)),Nt(e),Ce&&e){let n=2e4;const i=e.exp;if(i){const d=Math.round(Date.now()/1e3),m=i-d,T=m>ht?ht:.5;n=(m-T)*1e3}setTimeout(_e,n)}}catch{const s=new Et(pe);Ne(s.toObj())}};var dt=Object.prototype.hasOwnProperty;function pt(r,e,s){for(s of r.keys())if(ee(s,e))return s}function ee(r,e){var s,t,n;if(r===e)return!0;if(r&&e&&(s=r.constructor)===e.constructor){if(s===Date)return r.getTime()===e.getTime();if(s===RegExp)return r.toString()===e.toString();if(s===Array){if((t=r.length)===e.length)for(;t--&&ee(r[t],e[t]););return t===-1}if(s===Set){if(r.size!==e.size)return!1;for(t of r)if(n=t,n&&typeof n=="object"&&(n=pt(e,n),!n)||!e.has(n))return!1;return!0}if(s===Map){if(r.size!==e.size)return!1;for(t of r)if(n=t[0],n&&typeof n=="object"&&(n=pt(e,n),!n)||!ee(t[1],e.get(n)))return!1;return!0}if(s===ArrayBuffer)r=new Uint8Array(r),e=new Uint8Array(e);else if(s===DataView){if((t=r.byteLength)===e.byteLength)for(;t--&&r.getInt8(t)===e.getInt8(t););return t===-1}if(ArrayBuffer.isView(r)){if((t=r.byteLength)===e.byteLength)for(;t--&&r[t]===e[t];);return t===-1}if(!s||typeof r=="object"){t=0;for(s in r)if(dt.call(r,s)&&++t&&!dt.call(e,s)||!(s in e)||!ee(r[s],e[s]))return!1;return Object.keys(e).length===t}}return r!==r&&e!==e}function Vt(r){let e;const s=r[8].default,t=mt(s,r,r[7],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,[i]){t&&t.p&&(!e||i&128)&&_t(t,s,n,n[7],e?gt(s,n[7],i,null):vt(n[7]),null)},i(n){e||(le(t,n),e=!0)},o(n){ie(t,n),e=!1},d(n){t&&t.d(n)}}}function Pt(r,e,s){let t,n,i=$,d=()=>(i(),i=At(E,g=>s(10,n=g)),E);me(r,wt,g=>s(9,t=g)),r.$$.on_destroy.push(()=>i());let{$$slots:m={},$$scope:T}=e,{supabaseClient:p}=e,{endpointPrefix:_=Ct}=e,{callbackUrl:h=`${_}/callback`}=e,{profileUrl:v=`${_}/user`}=e,{autoRefreshToken:w=!0}=e,{session:E}=e;d();let{onUserUpdate:O=g=>{}}=e;const P=async()=>{(document==null?void 0:document.visibilityState)==="visible"&&(he(!0),await _e({profileUrl:v,autoRefreshToken:w,supabaseClient:p}),he(!1))};return Tt(()=>{P();let g=!0;yt.subscribe(C=>{if(g){g=!1;return}const H=n.user,J=n.accessToken;C===null&&ct(E,n={...n,user:null,accessToken:null},n),(C&&!ee(H,C)||t&&!ee(J,t))&&ct(E,n={...n,user:C,accessToken:t},n),O(C)}),w&&(window==null||window.addEventListener("visibilitychange",P));const{data:W}=p.auth.onAuthStateChange(async(C,H)=>{C!=="TOKEN_REFRESHED"&&(he(!0),await fetch(h,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),credentials:"same-origin",body:JSON.stringify({event:C,session:H})}).then(J=>{if(!J.ok){const te=new Et(h);Ne(te)}}),await _e({profileUrl:v,autoRefreshToken:w,supabaseClient:p}),he(!1))});return()=>{window==null||window.removeEventListener("visibilitychange",P),W==null||W.unsubscribe()}}),r.$$set=g=>{"supabaseClient"in g&&s(1,p=g.supabaseClient),"endpointPrefix"in g&&s(2,_=g.endpointPrefix),"callbackUrl"in g&&s(3,h=g.callbackUrl),"profileUrl"in g&&s(4,v=g.profileUrl),"autoRefreshToken"in g&&s(5,w=g.autoRefreshToken),"session"in g&&d(s(0,E=g.session)),"onUserUpdate"in g&&s(6,O=g.onUserUpdate),"$$scope"in g&&s(7,T=g.$$scope)},[E,p,_,h,v,w,O,T,m]}class Ht extends ve{constructor(e){super(),ge(this,e,Pt,Vt,be,{supabaseClient:1,endpointPrefix:2,callbackUrl:3,profileUrl:4,autoRefreshToken:5,session:0,onUserUpdate:6})}}const Mt="/_app/immutable/assets/hall_logo_image_90px-c8a9d17c.png";function Ft(r){let e,s,t,n;return{c(){e=u("div"),s=u("a"),t=u("img"),this.h()},l(i){e=f(i,"DIV",{});var d=c(e);s=f(d,"A",{class:!0,"aria-label":!0,href:!0});var m=c(s);t=f(m,"IMG",{class:!0,src:!0,alt:!0}),m.forEach(o),d.forEach(o),this.h()},h(){a(t,"class","rounded-full p-1"),Ut(t.src,n=Mt)||a(t,"src",n),a(t,"alt","BCYCA Inc"),a(s,"class","absolute top-0"),a(s,"aria-label","Hall photo"),a(s,"href","https://www.facebook.com/Burrell-Creek-Youth-and-Community-Association-Inc-1584955455117833/?__tn__=-UC*F")},m(i,d){z(i,e,d),l(e,s),l(s,t)},p:$,i:$,o:$,d(i){i&&o(e)}}}class qt extends ve{constructor(e){super(),ge(this,e,null,Ft,be,{})}}function zt(r){let e,s;return{c(){e=u("a"),s=x("Sign In"),this.h()},l(t){e=f(t,"A",{class:!0,"sveltekit:prefetch":!0,href:!0});var n=c(e);s=I(n,"Sign In"),n.forEach(o),this.h()},h(){a(e,"class","py-2 px-2 text-white bg-orange-500 font-semibold rounded-xl outline-black svelte-hc9kor"),a(e,"sveltekit:prefetch",""),a(e,"href","/auth/signin"),y(e,"active",r[1].url.pathname.endsWith("/signin"))},m(t,n){z(t,e,n),l(e,s)},p(t,n){n&2&&y(e,"active",t[1].url.pathname.endsWith("/signin"))},d(t){t&&o(e)}}}function Jt(r){let e,s;return{c(){e=u("a"),s=x("Sign Out"),this.h()},l(t){e=f(t,"A",{href:!0,class:!0});var n=c(e);s=I(n,"Sign Out"),n.forEach(o),this.h()},h(){a(e,"href","/api/auth/logout"),a(e,"class","py-2 px-2 text-white bg-orange-500 font-semibold rounded-xl outline-black")},m(t,n){z(t,e,n),l(e,s)},p:$,d(t){t&&o(e)}}}function Gt(r){let e,s;return{c(){e=u("a"),s=x("Sign In"),this.h()},l(t){e=f(t,"A",{class:!0,"sveltekit:prefetch":!0,href:!0});var n=c(e);s=I(n,"Sign In"),n.forEach(o),this.h()},h(){a(e,"class","py-2 px-2 text-white bg-orange-500 font-semibold rounded-xl outline-black svelte-hc9kor"),a(e,"sveltekit:prefetch",""),a(e,"href","/auth/signin"),y(e,"active",r[1].url.pathname.endsWith("/signin"))},m(t,n){z(t,e,n),l(e,s)},p(t,n){n&2&&y(e,"active",t[1].url.pathname.endsWith("/signin"))},d(t){t&&o(e)}}}function Kt(r){let e,s;return{c(){e=u("a"),s=x("Sign Out"),this.h()},l(t){e=f(t,"A",{href:!0,class:!0});var n=c(e);s=I(n,"Sign Out"),n.forEach(o),this.h()},h(){a(e,"href","/api/auth/logout"),a(e,"class","py-2 px-2 text-white bg-orange-500 font-semibold rounded-xl outline-black")},m(t,n){z(t,e,n),l(e,s)},p:$,d(t){t&&o(e)}}}function Yt(r){let e,s,t,n,i,d,m,T,p,_,h,v,w,E,O,P,g,W,C,H,J,te,K,G,S,se,ye,M,R,re,j,Y,we,Te,ne,B,X,Ae,Ue,ae,L,Q,xe,Ie,Z,oe,Oe,De;s=new qt({});function Ve(b,k){var F,N;return(N=(F=b[2])==null?void 0:F.user)!=null&&N.id?Jt:zt}let ce=Ve(r),D=ce(r);function Pe(b,k){var F,N;return(N=(F=b[2])==null?void 0:F.user)!=null&&N.id?Kt:Gt}let ue=Pe(r),V=ue(r);return{c(){e=u("nav"),We(s.$$.fragment),t=A(),n=u("div"),i=u("div"),d=u("a"),m=u("button"),T=x("Home"),p=A(),_=u("a"),h=u("button"),v=x("About"),w=A(),E=u("a"),O=u("button"),P=x("Contact Us"),g=A(),W=u("div"),D.c(),C=A(),H=u("div"),J=x("Strengthening Our Community"),te=A(),K=u("div"),G=u("button"),S=ut("svg"),se=ut("path"),ye=A(),M=u("div"),R=u("ul"),re=u("li"),j=u("a"),Y=u("button"),we=x("Home"),Te=A(),ne=u("li"),B=u("a"),X=u("button"),Ae=x("About"),Ue=A(),ae=u("li"),L=u("a"),Q=u("button"),xe=x("Contact Us"),Ie=A(),Z=u("li"),V.c(),this.h()},l(b){e=f(b,"NAV",{class:!0});var k=c(e);je(s.$$.fragment,k),t=U(k),n=f(k,"DIV",{class:!0});var F=c(n);i=f(F,"DIV",{class:!0});var N=c(i);d=f(N,"A",{"sveltekit:prefetch":!0,href:!0,class:!0});var He=c(d);m=f(He,"BUTTON",{class:!0});var Me=c(m);T=I(Me,"Home"),Me.forEach(o),He.forEach(o),p=U(N),_=f(N,"A",{"sveltekit:prefetch":!0,href:!0,class:!0});var Fe=c(_);h=f(Fe,"BUTTON",{class:!0});var qe=c(h);v=I(qe,"About"),qe.forEach(o),Fe.forEach(o),w=U(N),E=f(N,"A",{"sveltekit:prefetch":!0,href:!0,class:!0});var ze=c(E);O=f(ze,"BUTTON",{class:!0});var Je=c(O);P=I(Je,"Contact Us"),Je.forEach(o),ze.forEach(o),N.forEach(o),F.forEach(o),g=U(k),W=f(k,"DIV",{class:!0});var Ge=c(W);D.l(Ge),Ge.forEach(o),C=U(k),H=f(k,"DIV",{class:!0});var Ke=c(H);J=I(Ke,"Strengthening Our Community"),Ke.forEach(o),te=U(k),K=f(k,"DIV",{class:!0});var Ye=c(K);G=f(Ye,"BUTTON",{class:!0});var Xe=c(G);S=ft(Xe,"svg",{class:!0,"x-show":!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,viewBox:!0,stroke:!0});var Qe=c(S);se=ft(Qe,"path",{d:!0}),c(se).forEach(o),Qe.forEach(o),Xe.forEach(o),Ye.forEach(o),ye=U(k),M=f(k,"DIV",{class:!0});var Ze=c(M);R=f(Ze,"UL",{class:!0});var q=c(R);re=f(q,"LI",{});var $e=c(re);j=f($e,"A",{"sveltekit:prefetch":!0,href:!0,class:!0});var et=c(j);Y=f(et,"BUTTON",{class:!0});var tt=c(Y);we=I(tt,"Home"),tt.forEach(o),et.forEach(o),$e.forEach(o),Te=U(q),ne=f(q,"LI",{});var st=c(ne);B=f(st,"A",{"sveltekit:prefetch":!0,href:!0,class:!0});var rt=c(B);X=f(rt,"BUTTON",{class:!0});var nt=c(X);Ae=I(nt,"About"),nt.forEach(o),rt.forEach(o),st.forEach(o),Ue=U(q),ae=f(q,"LI",{});var at=c(ae);L=f(at,"A",{"sveltekit:prefetch":!0,href:!0,class:!0});var lt=c(L);Q=f(lt,"BUTTON",{class:!0});var it=c(Q);xe=I(it,"Contact Us"),it.forEach(o),lt.forEach(o),at.forEach(o),Ie=U(q),Z=f(q,"LI",{});var ot=c(Z);V.l(ot),ot.forEach(o),q.forEach(o),Ze.forEach(o),k.forEach(o),this.h()},h(){a(m,"class","py-2 px-2 font-semibold text-white bg-orange-500 rounded-xl"),a(d,"sveltekit:prefetch",""),a(d,"href","/"),a(d,"class","svelte-hc9kor"),y(d,"active",r[1].url.pathname.endsWith("/")),a(h,"class","py-2 px-2 text-white bg-orange-500 font-semibold rounded-xl outline-black"),a(_,"sveltekit:prefetch",""),a(_,"href","/about"),a(_,"class","svelte-hc9kor"),y(_,"active",r[1].url.pathname.endsWith("/about")),a(O,"class","py-2 px-2 text-white bg-orange-500 font-semibold rounded-xl outline-black"),a(E,"sveltekit:prefetch",""),a(E,"href","/contact"),a(E,"class","svelte-hc9kor"),y(E,"active",r[1].url.pathname.endsWith("/contact")),a(i,"class","hidden md:block"),a(n,"class","flex ml-[89px] items-center"),a(W,"class","md:flex items-center"),a(H,"class","text-sm pl-3 mb-4 mt-6 bg-orange-300 text-center z-50 font-extrabold text-orange-500 md:hidden"),a(se,"d","M4 6h16M4 12h16M4 18h16"),a(S,"class","w-6 h-6 text-orange-500 hover:text-purple-500 "),a(S,"x-show","!showMenu"),a(S,"fill","none"),a(S,"stroke-linecap","round"),a(S,"stroke-linejoin","round"),a(S,"stroke-width","2"),a(S,"viewBox","0 0 24 24"),a(S,"stroke","currentColor"),a(G,"class","outline-none bg-transparent mobile-menu-button"),a(K,"class","md:hidden flex items-center"),a(Y,"class","py-2 px-2 text-white bg-orange-500 font-semibold rounded-xl outline-black"),a(j,"sveltekit:prefetch",""),a(j,"href","/"),a(j,"class","svelte-hc9kor"),y(j,"active",r[1].url.pathname.endsWith("/")),a(X,"class","py-2 px-2 text-white bg-orange-500 font-semibold rounded-xl outline-black"),a(B,"sveltekit:prefetch",""),a(B,"href","/about"),a(B,"class","svelte-hc9kor"),y(B,"active",r[1].url.pathname.endsWith("/about")),a(Q,"class","py-2 px-2 text-white bg-orange-500 font-semibold rounded-xl outline-black"),a(L,"sveltekit:prefetch",""),a(L,"href","/contact"),a(L,"class","svelte-hc9kor"),y(L,"active",r[1].url.pathname.endsWith("/contact")),a(R,"class","space-y-2 list-none"),a(M,"class","bg-orange-300 absolute w-full mobile-menu"),y(M,"hidden",r[0]),a(e,"class","container h-15 flex justify-around items-center mx-auto bg-orange-300")},m(b,k){z(b,e,k),Be(s,e,null),l(e,t),l(e,n),l(n,i),l(i,d),l(d,m),l(m,T),l(i,p),l(i,_),l(_,h),l(h,v),l(i,w),l(i,E),l(E,O),l(O,P),l(e,g),l(e,W),D.m(W,null),l(e,C),l(e,H),l(H,J),l(e,te),l(e,K),l(K,G),l(G,S),l(S,se),l(e,ye),l(e,M),l(M,R),l(R,re),l(re,j),l(j,Y),l(Y,we),l(R,Te),l(R,ne),l(ne,B),l(B,X),l(X,Ae),l(R,Ue),l(R,ae),l(ae,L),l(L,Q),l(Q,xe),l(R,Ie),l(R,Z),V.m(Z,null),oe=!0,Oe||(De=[fe(G,"click",r[3]),fe(j,"click",r[3]),fe(B,"click",r[3]),fe(L,"click",r[3])],Oe=!0)},p(b,[k]){k&2&&y(d,"active",b[1].url.pathname.endsWith("/")),k&2&&y(_,"active",b[1].url.pathname.endsWith("/about")),k&2&&y(E,"active",b[1].url.pathname.endsWith("/contact")),ce===(ce=Ve(b))&&D?D.p(b,k):(D.d(1),D=ce(b),D&&(D.c(),D.m(W,null))),k&2&&y(j,"active",b[1].url.pathname.endsWith("/")),k&2&&y(B,"active",b[1].url.pathname.endsWith("/about")),k&2&&y(L,"active",b[1].url.pathname.endsWith("/contact")),ue===(ue=Pe(b))&&V?V.p(b,k):(V.d(1),V=ue(b),V&&(V.c(),V.m(Z,null))),k&1&&y(M,"hidden",b[0])},i(b){oe||(le(s.$$.fragment,b),oe=!0)},o(b){ie(s.$$.fragment,b),oe=!1},d(b){b&&o(e),Le(s),D.d(),V.d(),Oe=!1,xt(De)}}}function Xt(r,e,s){let t,n;me(r,bt,m=>s(1,t=m)),me(r,kt,m=>s(2,n=m));let i=!0;return[i,t,n,()=>{s(0,i=!i)}]}class Qt extends ve{constructor(e){super(),ge(this,e,Xt,Yt,be,{})}}function Zt(r){let e,s,t,n,i,d,m,T,p,_;return{c(){e=u("footer"),s=u("div"),t=u("a"),n=x("Terms of Service"),i=A(),d=u("h3"),m=x("Building a safer connected community"),T=A(),p=u("a"),_=x("Privacy Policy"),this.h()},l(h){e=f(h,"FOOTER",{class:!0});var v=c(e);s=f(v,"DIV",{class:!0});var w=c(s);t=f(w,"A",{"sveltekit:prefetch":!0,href:!0});var E=c(t);n=I(E,"Terms of Service"),E.forEach(o),i=U(w),d=f(w,"H3",{});var O=c(d);m=I(O,"Building a safer connected community"),O.forEach(o),T=U(w),p=f(w,"A",{"sveltekit:prefetch":!0,href:!0});var P=c(p);_=I(P,"Privacy Policy"),P.forEach(o),w.forEach(o),v.forEach(o),this.h()},h(){a(t,"sveltekit:prefetch",""),a(t,"href","/policies/termsofservice"),y(t,"active",r[0].url.pathname.endsWith("/policies/termsofservice")),a(p,"sveltekit:prefetch",""),a(p,"href","/policies/privacy"),y(p,"active",r[0].url.pathname.endsWith("/policies/privacy")),a(s,"class","flex content-center items-center justify-around bg-orange-600 text-light-600 w-full h-[45px]"),a(e,"class","col-span-8 row-span-1 sticky bottom-0")},m(h,v){z(h,e,v),l(e,s),l(s,t),l(t,n),l(s,i),l(s,d),l(d,m),l(s,T),l(s,p),l(p,_)},p(h,v){v&1&&y(t,"active",h[0].url.pathname.endsWith("/policies/termsofservice")),v&1&&y(p,"active",h[0].url.pathname.endsWith("/policies/privacy"))},d(h){h&&o(e)}}}function $t(r){let e,s,t,n,i,d,m;t=new Qt({});const T=r[1].default,p=mt(T,r,r[2],null);let _=Zt(r);return{c(){e=u("div"),s=u("header"),We(t.$$.fragment),n=A(),i=u("main"),p&&p.c(),d=A(),_&&_.c(),this.h()},l(h){e=f(h,"DIV",{class:!0,id:!0});var v=c(e);s=f(v,"HEADER",{class:!0});var w=c(s);je(t.$$.fragment,w),w.forEach(o),n=U(v),i=f(v,"MAIN",{class:!0});var E=c(i);p&&p.l(E),E.forEach(o),d=U(v),_&&_.l(v),v.forEach(o),this.h()},h(){a(s,"class","col-span-8 row-span-1"),a(i,"class","col-span-8 row-span-22"),a(e,"class","grid w-11/12 mx-auto min-h-screen svelte-1jjqws8"),a(e,"id","wrapper")},m(h,v){z(h,e,v),l(e,s),Be(t,s,null),l(e,n),l(e,i),p&&p.m(i,null),l(e,d),_&&_.m(e,null),m=!0},p(h,v){p&&p.p&&(!m||v&4)&&_t(p,T,h,h[2],m?gt(T,h[2],v,null):vt(h[2]),null),_.p(h,v)},i(h){m||(le(t.$$.fragment,h),le(p,h),m=!0)},o(h){ie(t.$$.fragment,h),ie(p,h),m=!1},d(h){h&&o(e),Le(t),p&&p.d(h),_&&_.d()}}}function es(r){let e,s;return e=new Ht({props:{supabaseClient:It,session:kt,$$slots:{default:[$t]},$$scope:{ctx:r}}}),{c(){We(e.$$.fragment)},l(t){je(e.$$.fragment,t)},m(t,n){Be(e,t,n),s=!0},p(t,[n]){const i={};n&5&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){s||(le(e.$$.fragment,t),s=!0)},o(t){ie(e.$$.fragment,t),s=!1},d(t){Le(e,t)}}}function ts(r,e,s){let t;me(r,bt,d=>s(0,t=d));let{$$slots:n={},$$scope:i}=e;return r.$$set=d=>{"$$scope"in d&&s(2,i=d.$$scope)},[t,n,i]}class is extends ve{constructor(e){super(),ge(this,e,ts,es,be,{})}}export{is as default};
